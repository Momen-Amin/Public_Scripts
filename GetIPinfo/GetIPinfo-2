#!/bin/bash
# =======================================================
# Server Network Interfaces Reporter
# Sends report via Email & Telegram
# GitHub-ready version
# =======================================================

# -------------------- Configuration --------------------
EMAIL_RECIPIENT="momen.amin@hotmail.com"

TELEGRAM_BOT_TOKEN=""
TELEGRAM_CHAT_ID="-5039914012"
# -------------------------------------------------------

# ---------------- Collect Server Info ------------------
HOSTNAME=$(hostname)
DATE=$(date +"%Y-%m-%d %H:%M:%S")

# Public IP
Public_IP_Address=$(curl -s https://api.ipify.org)

# Collect all interface names + IPv4 Addresses
PRIVATE_IPs=""
for IFACE in $(ls /sys/class/net/); do
    IP_ADDR=$(ip -4 addr show "$IFACE" | grep -oP '(?<=inet\s)\d+(\.\d+){3}')
    if [[ -n "$IP_ADDR" ]]; then
        PRIVATE_IPs+="$IFACE: $IP_ADDR"$'\n'
    fi
done
# -------------------------------------------------------

# -------------- Terminal Output Channel ----------------
echo
echo "======================================="
echo "ðŸ–¥ - Server Network Interfaces Reporter"
echo "======================================="
echo "ðŸŒ Hostname: $HOSTNAME"
echo "âŒšï¸ Date: $DATE"
echo
echo "ðŸŒ Public IP: $Public_IP_Address"
echo
echo "ðŸ” Private IPs (with interfaces):"
echo "$PRIVATE_IPs"
echo "======================================="
echo
# -------------------------------------------------------

# ----------------------- Message -----------------------
MESSAGE="ðŸ–¥ - Server Network Interfaces Reporter

ðŸŒ Hostname: $HOSTNAME
âŒšï¸ Date: $DATE

ðŸŒ Public IP Address:
$Public_IP_Address

ðŸ” Private IP Addresses (with interface names):
$PRIVATE_IPs
"
# -------------------------------------------------------

# -------------------- eMail Channel --------------------
# Email settings
recipient="$EMAIL_RECIPIENT"
subject="[$HOSTNAME] Server Network Interfaces Reporter"

# Email body
email_body="Server Hostnames: ${HOSTNAME}
âŒšï¸ Date: ${DATE}

ðŸŒ Public IP Address:
${Public_IP_Address}

ðŸ” Private IP Addresses (with interface names):
${PRIVATE_IPs}
"
echo -e "$MESSAGE" | mail -s "[$HOSTNAME] Server Network Interfaces Reporter" "$EMAIL_RECIPIENT"
# -------------------------------------------------------

# ------------------ Telegram Channel -------------------
curl -s -X POST "https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage" \
     -d chat_id="${TELEGRAM_CHAT_ID}" \
     --data-urlencode text="$MESSAGE"
# -------------------------------------------------------
